require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({24:[function(require,module,exports) {
module.exports=function(o){o()};
},{}],6:[function(require,module,exports) {
var e=["attack","delayTime","detune","frequency","gain","knee","pan","playbackRate","ratio","reduction","release","threshold","Q"];module.exports=function(a,n){return Object.keys(n).forEach(function(t){var r=n[t];e.indexOf(t)>=0?a[t].value=r:a[t]=r}),a},module.exports.delta=function(a,n){return Object.keys(n).forEach(function(t){var r=n[t];e.indexOf(t)>=0?a[t].value+=r:a[t]+=r}),a};
},{}],7:[function(require,module,exports) {
function r(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)}function n(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];for(var e=0;e<n.length-1;e+=1)n[e].connect(n[e+1]);return n[0]}n.obj=function(t){return n.apply(void 0,r(Object.values(t))),t},module.exports=n;
},{}],30:[function(require,module,exports) {
function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function t(e){return"function"==typeof e}function s(e){return"number"==typeof e}function n(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}module.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},e.prototype.emit=function(e){var s,r,o,h,v,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((s=arguments[1])instanceof Error)throw s;var u=new Error('Uncaught, unspecified "error" event. ('+s+")");throw u.context=s,u}if(i(r=this._events[e]))return!1;if(t(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),r.apply(this,h)}else if(n(r))for(h=Array.prototype.slice.call(arguments,1),o=(l=r.slice()).length,v=0;v<o;v++)l[v].apply(this,h);return!0},e.prototype.addListener=function(s,r){var o;if(!t(r))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",s,t(r.listener)?r.listener:r),this._events[s]?n(this._events[s])?this._events[s].push(r):this._events[s]=[this._events[s],r]:this._events[s]=r,n(this._events[s])&&!this._events[s].warned&&(o=i(this._maxListeners)?e.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[s].length>o&&(this._events[s].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[s].length),"function"==typeof console.trace&&console.trace()),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(e,s){if(!t(s))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,s.apply(this,arguments))}return i.listener=s,this.on(e,i),this},e.prototype.removeListener=function(e,s){var i,r,o,h;if(!t(s))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(i=this._events[e]).length,r=-1,i===s||t(i.listener)&&i.listener===s)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,s);else if(n(i)){for(h=o;h-- >0;)if(i[h]===s||i[h].listener&&i[h].listener===s){r=h;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,s)}return this},e.prototype.removeAllListeners=function(e){var s,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(s in this._events)"removeListener"!==s&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events={},this}if(t(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},e.prototype.listeners=function(e){return this._events&&this._events[e]?t(this._events[e])?[this._events[e]]:this._events[e].slice():[]},e.prototype.listenerCount=function(e){if(this._events){var s=this._events[e];if(t(s))return 1;if(s)return s.length}return 0},e.listenerCount=function(e,t){return e.listenerCount(t)};
},{}],25:[function(require,module,exports) {
const e=require("events");function t(){let e;self.onmessage=function(t){"start"===t.data?e=setInterval(postMessage.bind(null,"tick"),25):"stop"===t.data&&(clearInterval(e),e=null)}}function n(e){return e.toString().replace(/^[\w\W]*?\{([\w\W]*)\}[\w\W]*$/,"$1")}module.exports=function(s){const o=new e,r=.1;let c=0,i=0,a=60,u=60/a;const l=new Worker(URL.createObjectURL(new Blob([n(t)],{type:"application/javascript"})));return l.onmessage=function(e){"tick"===e.data&&function(){for(;i<s.currentTime+r;)o.emit("schedule",c,i),i+=u,c++}()},{setBpm:function(e){u=60/(a=e)},info:function(){return{bpm:a,secondsPerBeat:u}},start:function(){currentNote=0,nextNoteTime=s.currentTime,l.postMessage("start")},stop:function(){l.postMessage("stop")},emitter:o,schedule:e=>(o.on("schedule",e),e),clearSchedule:o.removeListener.bind(o,"schedule")}};
},{"events":30}],26:[function(require,module,exports) {
!function(){var e,t,a=function(e,t){e.value=t},i=Object.create(null,{activate:{writable:!0,value:function(e){e?(this.input.disconnect(),this.input.connect(this.activateNode),this.activateCallback&&this.activateCallback(e)):(this.input.disconnect(),this.input.connect(this.output))}},bypass:{get:function(){return this._bypass},set:function(e){this._lastBypassValue!==e&&(this._bypass=e,this.activate(!e),this._lastBypassValue=e)}},connect:{value:function(e){this.output.connect(e)}},disconnect:{value:function(e){this.output.disconnect(e)}},connectInOrder:{value:function(e){for(var t=e.length-1;t--;){if(!e[t].connect)return console.error("AudioNode.connectInOrder: TypeError: Not an AudioNode.",e[t]);e[t+1].input?e[t].connect(e[t+1].input):e[t].connect(e[t+1])}}},getDefaults:{value:function(){var e={};for(var t in this.defaults)e[t]=this.defaults[t].value;return e}},automate:{value:function(t,a,i,s){var n,o=s?~~(s/1e3):e.currentTime,u=i?~~(i/1e3):0,r=this.defaults[t],l=this[t];l?r.automatable?(i?(n="linearRampToValueAtTime",l.cancelScheduledValues(o),l.setValueAtTime(l.value,o)):n="setValueAtTime",l[n](a,u+o)):l=a:console.error("Invalid Property for "+this.name)}}}),s="float",n="boolean",o="int";function u(a){if(!(this instanceof u))return new u(a);var s="undefined"==typeof window?{}:window;if(s.AudioContext||(s.AudioContext=s.webkitAudioContext),a||(console.log("tuna.js: Missing audio context! Creating a new context for you."),a=s.AudioContext&&new s.AudioContext),!a)throw new Error("Tuna cannot initialize because this environment does not support web audio.");!function(e){if(!0===e.__connectified__)return;var t=e.createGain(),a=Object.getPrototypeOf(Object.getPrototypeOf(t)),s=a.connect;a.connect=function(){var e=arguments[0];return arguments[0]=i.isPrototypeOf?i.isPrototypeOf(e)?e.input:e:e.input||e,s.apply(this,arguments),e},e.__connectified__=!0}(a),e=a,t=this}function r(e){return Math.max(0,Math.round(100*Math.pow(2,e/6))/100)}function l(e,t){var a,i,s,n=0,o=0,u=0;return a=e.toExponential().match(/^.\.?(.*)e(.+)$/),n=parseInt(a[2],10)-(a[1]+"").length,a=t.toExponential().match(/^.\.?(.*)e(.+)$/),(s=parseInt(a[2],10)-(a[1]+"").length)>n&&(n=s),i=e%t,n<-100||n>20?(o=Math.round(Math.log(i)/Math.log(10)),(i/(u=Math.pow(10,o))).toFixed(o-n)*u):parseFloat(i.toFixed(-n))}function h(e){return 0===e?1:Math.abs(e)/e}function c(e){return(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function f(e,t){return void 0===e?t:e}"undefined"!=typeof module&&module.exports?module.exports=u:"function"==typeof define?window.define("Tuna",function(){return u}):window.Tuna=u,u.prototype.Bitcrusher=function(t){t||(t=this.getDefaults()),this.bufferSize=t.bufferSize||this.defaults.bufferSize.value,this.input=e.createGain(),this.activateNode=e.createGain(),this.processor=e.createScriptProcessor(this.bufferSize,1,1),this.output=e.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var a,i,s,n,o,u=0,r=0;this.processor.onaudioprocess=function(e){for(a=e.inputBuffer.getChannelData(0),i=e.outputBuffer.getChannelData(0),s=Math.pow(.5,this.bits),o=a.length,n=0;n<o;n++)(u+=this.normfreq)>=1&&(u-=1,r=s*Math.floor(a[n]/s+.5)),i[n]=r},this.bits=t.bits||this.defaults.bits.value,this.normfreq=f(t.normfreq,this.defaults.normfreq.value),this.bypass=t.bypass||!1},u.prototype.Bitcrusher.prototype=Object.create(i,{name:{value:"Bitcrusher"},defaults:{writable:!0,value:{bits:{value:4,min:1,max:16,automatable:!1,type:o},bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:o},bypass:{value:!1,automatable:!1,type:n},normfreq:{value:.1,min:1e-4,max:1,automatable:!1,type:s}}},bits:{enumerable:!0,get:function(){return this.processor.bits},set:function(e){this.processor.bits=e}},normfreq:{enumerable:!0,get:function(){return this.processor.normfreq},set:function(e){this.processor.normfreq=e}}}),u.prototype.Cabinet=function(t){t||(t=this.getDefaults()),this.input=e.createGain(),this.activateNode=e.createGain(),this.convolver=this.newConvolver(t.impulsePath||"../impulses/impulse_guitar.wav"),this.makeupNode=e.createGain(),this.output=e.createGain(),this.activateNode.connect(this.convolver.input),this.convolver.output.connect(this.makeupNode),this.makeupNode.connect(this.output),this.makeupGain=f(t.makeupGain,this.defaults.makeupGain),this.bypass=t.bypass||!1},u.prototype.Cabinet.prototype=Object.create(i,{name:{value:"Cabinet"},defaults:{writable:!0,value:{makeupGain:{value:1,min:0,max:20,automatable:!0,type:s},bypass:{value:!1,automatable:!1,type:n}}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=e}},newConvolver:{value:function(e){return new t.Convolver({impulse:e,dryLevel:0,wetLevel:1})}}}),u.prototype.Chorus=function(i){i||(i=this.getDefaults()),this.input=e.createGain(),this.attenuator=this.activateNode=e.createGain(),this.splitter=e.createChannelSplitter(2),this.delayL=e.createDelay(),this.delayR=e.createDelay(),this.feedbackGainNodeLR=e.createGain(),this.feedbackGainNodeRL=e.createGain(),this.merger=e.createChannelMerger(2),this.output=e.createGain(),this.lfoL=new t.LFO({target:this.delayL.delayTime,callback:a}),this.lfoR=new t.LFO({target:this.delayR.delayTime,callback:a}),this.input.connect(this.attenuator),this.attenuator.connect(this.output),this.attenuator.connect(this.splitter),this.splitter.connect(this.delayL,0),this.splitter.connect(this.delayR,1),this.delayL.connect(this.feedbackGainNodeLR),this.delayR.connect(this.feedbackGainNodeRL),this.feedbackGainNodeLR.connect(this.delayR),this.feedbackGainNodeRL.connect(this.delayL),this.delayL.connect(this.merger,0,0),this.delayR.connect(this.merger,0,1),this.merger.connect(this.output),this.feedback=f(i.feedback,this.defaults.feedback.value),this.rate=f(i.rate,this.defaults.rate.value),this.delay=f(i.delay,this.defaults.delay.value),this.depth=f(i.depth,this.defaults.depth.value),this.lfoR.phase=Math.PI/2,this.attenuator.gain.value=.6934,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=i.bypass||!1},u.prototype.Chorus.prototype=Object.create(i,{name:{value:"Chorus"},defaults:{writable:!0,value:{feedback:{value:.4,min:0,max:.95,automatable:!1,type:s},delay:{value:.0045,min:0,max:1,automatable:!1,type:s},depth:{value:.7,min:0,max:1,automatable:!1,type:s},rate:{value:1.5,min:0,max:8,automatable:!1,type:s},bypass:{value:!1,automatable:!1,type:n}}},delay:{enumerable:!0,get:function(){return this._delay},set:function(e){this._delay=2*Math.pow(10,e)*2e-4,this.lfoL.offset=this._delay,this.lfoR.offset=this._delay,this._depth=this._depth}},depth:{enumerable:!0,get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._depth*this._delay,this.lfoR.oscillation=this._depth*this._delay}},feedback:{enumerable:!0,get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeLR.gain.value=this._feedback,this.feedbackGainNodeRL.gain.value=this._feedback}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}}}),u.prototype.Compressor=function(t){t||(t=this.getDefaults()),this.input=e.createGain(),this.compNode=this.activateNode=e.createDynamicsCompressor(),this.makeupNode=e.createGain(),this.output=e.createGain(),this.compNode.connect(this.makeupNode),this.makeupNode.connect(this.output),this.automakeup=f(t.automakeup,this.defaults.automakeup.value),this.makeupGain=f(t.makeupGain,this.defaults.makeupGain.value),this.threshold=f(t.threshold,this.defaults.threshold.value),this.release=f(t.release,this.defaults.release.value),this.attack=f(t.attack,this.defaults.attack.value),this.ratio=t.ratio||this.defaults.ratio.value,this.knee=f(t.knee,this.defaults.knee.value),this.bypass=t.bypass||!1},u.prototype.Compressor.prototype=Object.create(i,{name:{value:"Compressor"},defaults:{writable:!0,value:{threshold:{value:-20,min:-60,max:0,automatable:!0,type:s},release:{value:250,min:10,max:2e3,automatable:!0,type:s},makeupGain:{value:1,min:1,max:100,automatable:!0,type:s},attack:{value:1,min:0,max:1e3,automatable:!0,type:s},ratio:{value:4,min:1,max:50,automatable:!0,type:s},knee:{value:5,min:0,max:40,automatable:!0,type:s},automakeup:{value:!1,automatable:!1,type:n},bypass:{value:!1,automatable:!1,type:n}}},computeMakeup:{value:function(){var e=this.compNode;return-(e.threshold.value-e.threshold.value/e.ratio.value)/4}},automakeup:{enumerable:!0,get:function(){return this._automakeup},set:function(e){this._automakeup=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},threshold:{enumerable:!0,get:function(){return this.compNode.threshold},set:function(e){this.compNode.threshold.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},ratio:{enumerable:!0,get:function(){return this.compNode.ratio},set:function(e){this.compNode.ratio.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},knee:{enumerable:!0,get:function(){return this.compNode.knee},set:function(e){this.compNode.knee.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},attack:{enumerable:!0,get:function(){return this.compNode.attack},set:function(e){this.compNode.attack.value=e/1e3}},release:{enumerable:!0,get:function(){return this.compNode.release},set:function(e){this.compNode.release.value=e/1e3}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=r(e)}}}),u.prototype.Convolver=function(t){t||(t=this.getDefaults()),this.input=e.createGain(),this.activateNode=e.createGain(),this.convolver=e.createConvolver(),this.dry=e.createGain(),this.filterLow=e.createBiquadFilter(),this.filterHigh=e.createBiquadFilter(),this.wet=e.createGain(),this.output=e.createGain(),this.activateNode.connect(this.filterLow),this.activateNode.connect(this.dry),this.filterLow.connect(this.filterHigh),this.filterHigh.connect(this.convolver),this.convolver.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.dryLevel=f(t.dryLevel,this.defaults.dryLevel.value),this.wetLevel=f(t.wetLevel,this.defaults.wetLevel.value),this.highCut=t.highCut||this.defaults.highCut.value,this.buffer=t.impulse||"./impulses/ir_rev_short.wav",this.lowCut=t.lowCut||this.defaults.lowCut.value,this.level=f(t.level,this.defaults.level.value),this.filterHigh.type="lowpass",this.filterLow.type="highpass",this.bypass=t.bypass||!1},u.prototype.Convolver.prototype=Object.create(i,{name:{value:"Convolver"},defaults:{writable:!0,value:{highCut:{value:22050,min:20,max:22050,automatable:!0,type:s},lowCut:{value:20,min:20,max:22050,automatable:!0,type:s},dryLevel:{value:1,min:0,max:1,automatable:!0,type:s},wetLevel:{value:1,min:0,max:1,automatable:!0,type:s},level:{value:1,min:0,max:1,automatable:!0,type:s}}},lowCut:{get:function(){return this.filterLow.frequency},set:function(e){this.filterLow.frequency.value=e}},highCut:{get:function(){return this.filterHigh.frequency},set:function(e){this.filterHigh.frequency.value=e}},level:{get:function(){return this.output.gain},set:function(e){this.output.gain.value=e}},dryLevel:{get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},wetLevel:{get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},buffer:{enumerable:!1,get:function(){return this.convolver.buffer},set:function(t){var a=this.convolver,i=new XMLHttpRequest;t?(i.open("GET",t,!0),i.responseType="arraybuffer",i.onreadystatechange=function(){4===i.readyState&&(i.status<300&&i.status>199||302===i.status)&&e.decodeAudioData(i.response,function(e){a.buffer=e},function(e){e&&console.log("Tuna.Convolver.setBuffer: Error decoding data"+e)})},i.send(null)):console.log("Tuna.Convolver.setBuffer: Missing impulse path!")}}}),u.prototype.Delay=function(t){t||(t=this.getDefaults()),this.input=e.createGain(),this.activateNode=e.createGain(),this.dry=e.createGain(),this.wet=e.createGain(),this.filter=e.createBiquadFilter(),this.delay=e.createDelay(10),this.feedbackNode=e.createGain(),this.output=e.createGain(),this.activateNode.connect(this.delay),this.activateNode.connect(this.dry),this.delay.connect(this.filter),this.filter.connect(this.feedbackNode),this.feedbackNode.connect(this.delay),this.feedbackNode.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.delayTime=t.delayTime||this.defaults.delayTime.value,this.feedback=f(t.feedback,this.defaults.feedback.value),this.wetLevel=f(t.wetLevel,this.defaults.wetLevel.value),this.dryLevel=f(t.dryLevel,this.defaults.dryLevel.value),this.cutoff=t.cutoff||this.defaults.cutoff.value,this.filter.type="lowpass",this.bypass=t.bypass||!1},u.prototype.Delay.prototype=Object.create(i,{name:{value:"Delay"},defaults:{writable:!0,value:{delayTime:{value:100,min:20,max:1e3,automatable:!1,type:s},feedback:{value:.45,min:0,max:.9,automatable:!0,type:s},cutoff:{value:2e4,min:20,max:2e4,automatable:!0,type:s},wetLevel:{value:.5,min:0,max:1,automatable:!0,type:s},dryLevel:{value:1,min:0,max:1,automatable:!0,type:s}}},delayTime:{enumerable:!0,get:function(){return this.delay.delayTime},set:function(e){this.delay.delayTime.value=e/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},dryLevel:{enumerable:!0,get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},feedback:{enumerable:!0,get:function(){return this.feedbackNode.gain},set:function(e){this.feedbackNode.gain.value=e}},cutoff:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),u.prototype.Filter=function(t){t||(t=this.getDefaults()),this.input=e.createGain(),this.activateNode=e.createGain(),this.filter=e.createBiquadFilter(),this.output=e.createGain(),this.activateNode.connect(this.filter),this.filter.connect(this.output),this.frequency=t.frequency||this.defaults.frequency.value,this.Q=t.resonance||this.defaults.Q.value,this.filterType=f(t.filterType,this.defaults.filterType.value),this.gain=f(t.gain,this.defaults.gain.value),this.bypass=t.bypass||!1},u.prototype.Filter.prototype=Object.create(i,{name:{value:"Filter"},defaults:{writable:!0,value:{frequency:{value:800,min:20,max:22050,automatable:!0,type:s},Q:{value:1,min:.001,max:100,automatable:!0,type:s},gain:{value:0,min:-40,max:40,automatable:!0,type:s},bypass:{value:!1,automatable:!1,type:n},filterType:{value:"lowpass",automatable:!1,type:"string"}}},filterType:{enumerable:!0,get:function(){return this.filter.type},set:function(e){this.filter.type=e}},Q:{enumerable:!0,get:function(){return this.filter.Q},set:function(e){this.filter.Q.value=e}},gain:{enumerable:!0,get:function(){return this.filter.gain},set:function(e){this.filter.gain.value=e}},frequency:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),u.prototype.Gain=function(t){t||(t=this.getDefaults()),this.input=e.createGain(),this.activateNode=e.createGain(),this.gainNode=e.createGain(),this.output=e.createGain(),this.activateNode.connect(this.gainNode),this.gainNode.connect(this.output),this.gain=f(t.gain,this.defaults.gain.value),this.bypass=t.bypass||!1},u.prototype.Gain.prototype=Object.create(i,{name:{value:"Gain"},defaults:{writable:!0,value:{bypass:{value:!1,automatable:!1,type:n},gain:{value:1,automatable:!0,type:s}}},gain:{enumerable:!0,get:function(){return this.gainNode.gain},set:function(e){this.gainNode.gain.value=e}}}),u.prototype.MoogFilter=function(t){var a,i,s,n,o,u,r,l,h,c,p,d,v,m,y;t||(t=this.getDefaults()),this.bufferSize=t.bufferSize||this.defaults.bufferSize.value,this.input=e.createGain(),this.activateNode=e.createGain(),this.processor=e.createScriptProcessor(this.bufferSize,1,1),this.output=e.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output),a=i=s=n=o=u=r=l=0,this.processor.onaudioprocess=function(e){for(h=e.inputBuffer.getChannelData(0),c=e.outputBuffer.getChannelData(0),p=1.16*this.cutoff,y=p*p*.35013*(p*p),d=this.resonance*(1-.15*p*p),m=h.length,v=0;v<m;v++)h[v]-=l*d,h[v]*=y,o=h[v]+.3*a+(1-p)*o,a=h[v],u=o+.3*i+(1-p)*u,i=o,r=u+.3*s+(1-p)*r,s=u,l=r+.3*n+(1-p)*l,n=r,c[v]=l},this.cutoff=f(t.cutoff,this.defaults.cutoff.value),this.resonance=f(t.resonance,this.defaults.resonance.value),this.bypass=t.bypass||!1},u.prototype.MoogFilter.prototype=Object.create(i,{name:{value:"MoogFilter"},defaults:{writable:!0,value:{bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:o},bypass:{value:!1,automatable:!1,type:n},cutoff:{value:.065,min:1e-4,max:1,automatable:!1,type:s},resonance:{value:3.5,min:0,max:4,automatable:!1,type:s}}},cutoff:{enumerable:!0,get:function(){return this.processor.cutoff},set:function(e){this.processor.cutoff=e}},resonance:{enumerable:!0,get:function(){return this.processor.resonance},set:function(e){this.processor.resonance=e}}}),u.prototype.Overdrive=function(t){t||(t=this.getDefaults()),this.input=e.createGain(),this.activateNode=e.createGain(),this.inputDrive=e.createGain(),this.waveshaper=e.createWaveShaper(),this.outputDrive=e.createGain(),this.output=e.createGain(),this.activateNode.connect(this.inputDrive),this.inputDrive.connect(this.waveshaper),this.waveshaper.connect(this.outputDrive),this.outputDrive.connect(this.output),this.ws_table=new Float32Array(this.k_nSamples),this.drive=f(t.drive,this.defaults.drive.value),this.outputGain=f(t.outputGain,this.defaults.outputGain.value),this.curveAmount=f(t.curveAmount,this.defaults.curveAmount.value),this.algorithmIndex=f(t.algorithmIndex,this.defaults.algorithmIndex.value),this.bypass=t.bypass||!1},u.prototype.Overdrive.prototype=Object.create(i,{name:{value:"Overdrive"},defaults:{writable:!0,value:{drive:{value:1,min:0,max:1,automatable:!0,type:s,scaled:!0},outputGain:{value:1,min:0,max:1,automatable:!0,type:s,scaled:!0},curveAmount:{value:.725,min:0,max:1,automatable:!1,type:s},algorithmIndex:{value:0,min:0,max:5,automatable:!1,type:o}}},k_nSamples:{value:8192},drive:{get:function(){return this.inputDrive.gain},set:function(e){this._drive=e}},curveAmount:{get:function(){return this._curveAmount},set:function(e){this._curveAmount=e,void 0===this._algorithmIndex&&(this._algorithmIndex=0),this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount,this.k_nSamples,this.ws_table),this.waveshaper.curve=this.ws_table}},outputGain:{get:function(){return this.outputDrive.gain},set:function(e){this._outputGain=r(e)}},algorithmIndex:{get:function(){return this._algorithmIndex},set:function(e){this._algorithmIndex=e,this.curveAmount=this._curveAmount}},waveshaperAlgorithms:{value:[function(e,t,a){var i,s,n=2*(e=Math.min(e,.9999))/(1-e);for(i=0;i<t;i++)s=2*i/t-1,a[i]=(1+n)*s/(1+n*Math.abs(s))},function(e,t,a){var i,s,n;for(i=0;i<t;i++)s=2*i/t-1,n=(.5*Math.pow(s+1.4,2)-1)*n>=0?5.8:1.2,a[i]=c(n)},function(e,t,a){var i,s,n,o=1-e;for(i=0;i<t;i++)n=(s=2*i/t-1)<0?-Math.pow(Math.abs(s),o+.04):Math.pow(s,o),a[i]=c(2*n)},function(e,t,a){var i,s,n,o,u=1-e>.99?.99:1-e;for(i=0;i<t;i++)s=2*i/t-1,(o=Math.abs(s))<u?n=o:o>u?n=u+(o-u)/(1+Math.pow((o-u)/(1-u),2)):o>1&&(n=o),a[i]=h(s)*n*(1/((u+1)/2))},function(e,t,a){var i,s;for(i=0;i<t;i++)s=2*i/t-1,a[i]=s<-.08905?-.75*(1-Math.pow(1-(Math.abs(s)-.032857),12)+1/3*(Math.abs(s)-.032847))+.01:s>=-.08905&&s<.320018?s*s*-6.153+3.9375*s:.630035},function(e,t,a){var i,s,n=2+Math.round(14*e),o=Math.round(Math.pow(2,n-1));for(i=0;i<t;i++)s=2*i/t-1,a[i]=Math.round(s*o)/o}]}}),u.prototype.Panner=function(t){t||(t=this.getDefaults()),this.input=e.createGain(),this.activateNode=e.createGain(),this.panner=e.createStereoPanner(),this.output=e.createGain(),this.activateNode.connect(this.panner),this.panner.connect(this.output),this.pan=f(t.pan,this.defaults.pan.value),this.bypass=t.bypass||!1},u.prototype.Panner.prototype=Object.create(i,{name:{value:"Panner"},defaults:{writable:!0,value:{bypass:{value:!1,automatable:!1,type:n},pan:{value:0,min:-1,max:1,automatable:!0,type:s}}},pan:{enumerable:!0,get:function(){return this.panner.pan},set:function(e){this.panner.pan.value=e}}}),u.prototype.Phaser=function(a){a||(a=this.getDefaults()),this.input=e.createGain(),this.splitter=this.activateNode=e.createChannelSplitter(2),this.filtersL=[],this.filtersR=[],this.feedbackGainNodeL=e.createGain(),this.feedbackGainNodeR=e.createGain(),this.merger=e.createChannelMerger(2),this.filteredSignal=e.createGain(),this.output=e.createGain(),this.lfoL=new t.LFO({target:this.filtersL,callback:this.callback}),this.lfoR=new t.LFO({target:this.filtersR,callback:this.callback});for(var i=this.stage;i--;)this.filtersL[i]=e.createBiquadFilter(),this.filtersR[i]=e.createBiquadFilter(),this.filtersL[i].type="allpass",this.filtersR[i].type="allpass";this.input.connect(this.splitter),this.input.connect(this.output),this.splitter.connect(this.filtersL[0],0,0),this.splitter.connect(this.filtersR[0],1,0),this.connectInOrder(this.filtersL),this.connectInOrder(this.filtersR),this.filtersL[this.stage-1].connect(this.feedbackGainNodeL),this.filtersL[this.stage-1].connect(this.merger,0,0),this.filtersR[this.stage-1].connect(this.feedbackGainNodeR),this.filtersR[this.stage-1].connect(this.merger,0,1),this.feedbackGainNodeL.connect(this.filtersL[0]),this.feedbackGainNodeR.connect(this.filtersR[0]),this.merger.connect(this.output),this.rate=f(a.rate,this.defaults.rate.value),this.baseModulationFrequency=a.baseModulationFrequency||this.defaults.baseModulationFrequency.value,this.depth=f(a.depth,this.defaults.depth.value),this.feedback=f(a.feedback,this.defaults.feedback.value),this.stereoPhase=f(a.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=a.bypass||!1},u.prototype.Phaser.prototype=Object.create(i,{name:{value:"Phaser"},stage:{value:4},defaults:{writable:!0,value:{rate:{value:.1,min:0,max:8,automatable:!1,type:s},depth:{value:.6,min:0,max:1,automatable:!1,type:s},feedback:{value:.7,min:0,max:1,automatable:!1,type:s},stereoPhase:{value:40,min:0,max:180,automatable:!1,type:s},baseModulationFrequency:{value:700,min:500,max:1500,automatable:!1,type:s}}},callback:{value:function(e,t){for(var a=0;a<4;a++)e[a].frequency.value=t}},depth:{get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._baseModulationFrequency*this._depth,this.lfoR.oscillation=this._baseModulationFrequency*this._depth}},rate:{get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},baseModulationFrequency:{enumerable:!0,get:function(){return this._baseModulationFrequency},set:function(e){this._baseModulationFrequency=e,this.lfoL.offset=this._baseModulationFrequency,this.lfoR.offset=this._baseModulationFrequency,this._depth=this._depth}},feedback:{get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeL.gain.value=this._feedback,this.feedbackGainNodeR.gain.value=this._feedback}},stereoPhase:{get:function(){return this._stereoPhase},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=l(t,2*Math.PI),this.lfoR._phase=t}}}),u.prototype.PingPongDelay=function(t){t||(t=this.getDefaults()),this.input=e.createGain(),this.wetLevel=e.createGain(),this.stereoToMonoMix=e.createGain(),this.feedbackLevel=e.createGain(),this.output=e.createGain(),this.delayLeft=e.createDelay(10),this.delayRight=e.createDelay(10),this.activateNode=e.createGain(),this.splitter=e.createChannelSplitter(2),this.merger=e.createChannelMerger(2),this.activateNode.connect(this.splitter),this.splitter.connect(this.stereoToMonoMix,0,0),this.splitter.connect(this.stereoToMonoMix,1,0),this.stereoToMonoMix.gain.value=.5,this.stereoToMonoMix.connect(this.wetLevel),this.wetLevel.connect(this.delayLeft),this.feedbackLevel.connect(this.delayLeft),this.delayLeft.connect(this.delayRight),this.delayRight.connect(this.feedbackLevel),this.delayLeft.connect(this.merger,0,0),this.delayRight.connect(this.merger,0,1),this.merger.connect(this.output),this.activateNode.connect(this.output),this.delayTimeLeft=void 0!==t.delayTimeLeft?t.delayTimeLeft:this.defaults.delayTimeLeft.value,this.delayTimeRight=void 0!==t.delayTimeRight?t.delayTimeRight:this.defaults.delayTimeRight.value,this.feedbackLevel.gain.value=void 0!==t.feedback?t.feedback:this.defaults.feedback.value,this.wetLevel.gain.value=void 0!==t.wetLevel?t.wetLevel:this.defaults.wetLevel.value,this.bypass=t.bypass||!1},u.prototype.PingPongDelay.prototype=Object.create(i,{name:{value:"PingPongDelay"},delayTimeLeft:{enumerable:!0,get:function(){return this._delayTimeLeft},set:function(e){this._delayTimeLeft=e,this.delayLeft.delayTime.value=e/1e3}},delayTimeRight:{enumerable:!0,get:function(){return this._delayTimeRight},set:function(e){this._delayTimeRight=e,this.delayRight.delayTime.value=e/1e3}},defaults:{writable:!0,value:{delayTimeLeft:{value:200,min:1,max:1e4,automatable:!1,type:o},delayTimeRight:{value:400,min:1,max:1e4,automatable:!1,type:o},feedback:{value:.3,min:0,max:1,automatable:!1,type:s},wetLevel:{value:.5,min:0,max:1,automatable:!1,type:s}}}}),u.prototype.Tremolo=function(i){i||(i=this.getDefaults()),this.input=e.createGain(),this.splitter=this.activateNode=e.createChannelSplitter(2),this.amplitudeL=e.createGain(),this.amplitudeR=e.createGain(),this.merger=e.createChannelMerger(2),this.output=e.createGain(),this.lfoL=new t.LFO({target:this.amplitudeL.gain,callback:a}),this.lfoR=new t.LFO({target:this.amplitudeR.gain,callback:a}),this.input.connect(this.splitter),this.splitter.connect(this.amplitudeL,0),this.splitter.connect(this.amplitudeR,1),this.amplitudeL.connect(this.merger,0,0),this.amplitudeR.connect(this.merger,0,1),this.merger.connect(this.output),this.rate=i.rate||this.defaults.rate.value,this.intensity=f(i.intensity,this.defaults.intensity.value),this.stereoPhase=f(i.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.offset=1-this.intensity/2,this.lfoR.offset=1-this.intensity/2,this.lfoL.phase=this.stereoPhase*Math.PI/180,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=i.bypass||!1},u.prototype.Tremolo.prototype=Object.create(i,{name:{value:"Tremolo"},defaults:{writable:!0,value:{intensity:{value:.3,min:0,max:1,automatable:!1,type:s},stereoPhase:{value:0,min:0,max:180,automatable:!1,type:s},rate:{value:5,min:.1,max:11,automatable:!1,type:s}}},intensity:{enumerable:!0,get:function(){return this._intensity},set:function(e){this._intensity=e,this.lfoL.offset=1-this._intensity/2,this.lfoR.offset=1-this._intensity/2,this.lfoL.oscillation=this._intensity,this.lfoR.oscillation=this._intensity}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},stereoPhase:{enumerable:!0,get:function(){return this._stereoPhase},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=l(t,2*Math.PI),this.lfoR.phase=t}}}),u.prototype.WahWah=function(a){a||(a=this.getDefaults()),this.input=e.createGain(),this.activateNode=e.createGain(),this.envelopeFollower=new t.EnvelopeFollower({target:this,callback:function(e,t){e.sweep=t}}),this.filterBp=e.createBiquadFilter(),this.filterPeaking=e.createBiquadFilter(),this.output=e.createGain(),this.activateNode.connect(this.filterBp),this.filterBp.connect(this.filterPeaking),this.filterPeaking.connect(this.output),this.init(),this.automode=f(a.automode,this.defaults.automode.value),this.resonance=a.resonance||this.defaults.resonance.value,this.sensitivity=f(a.sensitivity,this.defaults.sensitivity.value),this.baseFrequency=f(a.baseFrequency,this.defaults.baseFrequency.value),this.excursionOctaves=a.excursionOctaves||this.defaults.excursionOctaves.value,this.sweep=f(a.sweep,this.defaults.sweep.value),this.activateNode.gain.value=2,this.envelopeFollower.activate(!0),this.bypass=a.bypass||!1},u.prototype.WahWah.prototype=Object.create(i,{name:{value:"WahWah"},defaults:{writable:!0,value:{automode:{value:!0,automatable:!1,type:n},baseFrequency:{value:.5,min:0,max:1,automatable:!1,type:s},excursionOctaves:{value:2,min:1,max:6,automatable:!1,type:s},sweep:{value:.2,min:0,max:1,automatable:!1,type:s},resonance:{value:10,min:1,max:100,automatable:!1,type:s},sensitivity:{value:.5,min:-1,max:1,automatable:!1,type:s}}},automode:{get:function(){return this._automode},set:function(e){this._automode=e,e?(this.activateNode.connect(this.envelopeFollower.input),this.envelopeFollower.activate(!0)):(this.envelopeFollower.activate(!1),this.activateNode.disconnect(),this.activateNode.connect(this.filterBp))}},filterFreqTimeout:{value:0},setFilterFreq:{value:function(){try{this.filterBp.frequency.value=Math.min(22050,this._baseFrequency+this._excursionFrequency*this._sweep),this.filterPeaking.frequency.value=Math.min(22050,this._baseFrequency+this._excursionFrequency*this._sweep)}catch(e){clearTimeout(this.filterFreqTimeout),this.filterFreqTimeout=setTimeout(function(){this.setFilterFreq()}.bind(this),0)}}},sweep:{enumerable:!0,get:function(){return this._sweep},set:function(e){this._sweep=Math.pow(e>1?1:e<0?0:e,this._sensitivity),this.setFilterFreq()}},baseFrequency:{enumerable:!0,get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=50*Math.pow(10,2*t),this._excursionFrequency=Math.min(e.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},excursionOctaves:{enumerable:!0,get:function(){return this._excursionOctaves},set:function(t){this._excursionOctaves=t,this._excursionFrequency=Math.min(e.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},sensitivity:{enumerable:!0,get:function(){return this._sensitivity},set:function(e){this._sensitivity=Math.pow(10,e)}},resonance:{enumerable:!0,get:function(){return this._resonance},set:function(e){this._resonance=e,this.filterPeaking.Q=this._resonance}},init:{value:function(){this.output.gain.value=1,this.filterPeaking.type="peaking",this.filterBp.type="bandpass",this.filterPeaking.frequency.value=100,this.filterPeaking.gain.value=20,this.filterPeaking.Q.value=5,this.filterBp.frequency.value=100,this.filterBp.Q.value=1}}}),u.prototype.EnvelopeFollower=function(t){t||(t=this.getDefaults()),this.input=e.createGain(),this.jsNode=this.output=e.createScriptProcessor(this.buffersize,1,1),this.input.connect(this.output),this.attackTime=f(t.attackTime,this.defaults.attackTime.value),this.releaseTime=f(t.releaseTime,this.defaults.releaseTime.value),this._envelope=0,this.target=t.target||{},this.callback=t.callback||function(){},this.bypass=t.bypass||!1},u.prototype.EnvelopeFollower.prototype=Object.create(i,{name:{value:"EnvelopeFollower"},defaults:{value:{attackTime:{value:.003,min:0,max:.5,automatable:!1,type:s},releaseTime:{value:.5,min:0,max:.5,automatable:!1,type:s}}},buffersize:{value:256},envelope:{value:0},sampleRate:{value:44100},attackTime:{enumerable:!0,get:function(){return this._attackTime},set:function(e){this._attackTime=e,this._attackC=Math.exp(-1/this._attackTime*this.sampleRate/this.buffersize)}},releaseTime:{enumerable:!0,get:function(){return this._releaseTime},set:function(e){this._releaseTime=e,this._releaseC=Math.exp(-1/this._releaseTime*this.sampleRate/this.buffersize)}},callback:{get:function(){return this._callback},set:function(e){"function"==typeof e?this._callback=e:console.error("tuna.js: "+this.name+": Callback must be a function!")}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(t){this.activated=t,t?(this.jsNode.connect(e.destination),this.jsNode.onaudioprocess=this.returnCompute(this)):(this.jsNode.disconnect(),this.jsNode.onaudioprocess=null),this.activateCallback&&this.activateCallback(t)}},returnCompute:{value:function(e){return function(t){e.compute(t)}}},compute:{value:function(e){var t,a,i,s,n=e.inputBuffer.getChannelData(0).length,o=e.inputBuffer.numberOfChannels;if(a=i=s=0,o>1)for(s=0;s<n;++s)for(;a<o;++a)i+=(t=e.inputBuffer.getChannelData(a)[s])*t/o;else for(s=0;s<n;++s)i+=(t=e.inputBuffer.getChannelData(0)[s])*t;i=Math.sqrt(i),this._envelope<i?(this._envelope*=this._attackC,this._envelope+=(1-this._attackC)*i):(this._envelope*=this._releaseC,this._envelope+=(1-this._releaseC)*i),this._callback(this._target,this._envelope)}}}),u.prototype.LFO=function(t){t||(t=this.getDefaults()),this.input=e.createGain(),this.output=e.createScriptProcessor(256,1,1),this.activateNode=e.destination,this.frequency=f(t.frequency,this.defaults.frequency.value),this.offset=f(t.offset,this.defaults.offset.value),this.oscillation=f(t.oscillation,this.defaults.oscillation.value),this.phase=f(t.phase,this.defaults.phase.value),this.target=t.target||{},this.output.onaudioprocess=this.callback(t.callback||function(){}),this.bypass=t.bypass||!1},u.prototype.LFO.prototype=Object.create(i,{name:{value:"LFO"},bufferSize:{value:256},sampleRate:{value:44100},defaults:{value:{frequency:{value:1,min:0,max:20,automatable:!1,type:s},offset:{value:.85,min:0,max:22049,automatable:!1,type:s},oscillation:{value:.3,min:-22050,max:22050,automatable:!1,type:s},phase:{value:0,min:0,max:2*Math.PI,automatable:!1,type:s}}},frequency:{get:function(){return this._frequency},set:function(e){this._frequency=e,this._phaseInc=2*Math.PI*this._frequency*this.bufferSize/this.sampleRate}},offset:{get:function(){return this._offset},set:function(e){this._offset=e}},oscillation:{get:function(){return this._oscillation},set:function(e){this._oscillation=e}},phase:{get:function(){return this._phase},set:function(e){this._phase=e}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(t){t?(this.output.connect(e.destination),this.activateCallback&&this.activateCallback(t)):this.output.disconnect()}},callback:{value:function(e){var t=this;return function(){t._phase+=t._phaseInc,t._phase>2*Math.PI&&(t._phase=0),e(t._target,t._offset+t._oscillation*Math.sin(t._phase))}}}}),u.toString=u.prototype.toString=function(){return"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js"}}();
},{}],8:[function(require,module,exports) {
function n(n,r){return Math.floor(Math.random()*(r-n))+n}function r(r){return r[n(0,r.length)]}function t(n,r,t){return n+t*(r-n)}module.exports={inRange:n,from:r,percentRange:t};
},{}],9:[function(require,module,exports) {
var e=require("hot-pockets"),a=require("./setParams"),n=require("./connectAll"),t=require("./rand");module.exports=function(r){var o=r.ac,l=r.dest,i=r.beats,c=r.tuna,u=void 0,f=new c.Chorus({}),s=a(o.createBiquadFilter(),{type:"lowpass",frequency:1e3,gain:10}),m=new c.Phaser({rate:1.2,depth:.3,feedback:.2,stereoPhase:30,baseModulationFrequency:700,bypass:0}),d=new c.PingPongDelay,p=new c.Convolver({highCut:22050,lowCut:20,dryLevel:0,wetLevel:1.5,level:1,bypass:0}),h=a(o.createGain(),{gain:0}),v=a(o.createDynamicsCompressor(),{threshold:-70,knee:0,ratio:10,attack:.005,release:.05}),y=n(f,s,m,p,d,v,h,l);var T=function(e,n,t){var r=e.createBufferSource(),o=n.detune;return a(r,{buffer:t,detune:void 0===o?0:o,loop:!0}),r}(o,{},function(e){for(var a=e.createBuffer(1,4096,e.sampleRate),n=a.getChannelData(0),t=0;t<4096;t++)n[t]=Math.random();return a}(o));T.start(o.currentTime),T.connect(y),h.gain.setValueAtTime(1e-4,o.currentTime),h.gain.linearRampToValueAtTime(1,o.currentTime+3),e(function(){u&&i.clearSchedule(u);var e=i.info(),n=(e.bpm,e.secondsPerBeat);a(v,{threshold:-90}),a(s,{type:"notch",gain:10}),a(f,{rate:5,feedback:.5,delay:.1,bypass:0}),a(p,{wetLevel:.8,dryLevel:0}),a(d,{bypass:0,wetLevel:.9,feedback:.7,delayTimeLeft:500,delayTimeRight:700}),T.playbackRate.value=.2;var r=[function(e){a(f,{rate:t.from([1,5,20,50])})},function(e){a(f,{feedback:t.from([.1,.2,.8])})},function(e){a(f,{delay:t.from([.1,.2,.8,1.5,3])})},function(e){a(p,{wetLevel:t.from([.1,.2,.8,1.1])})},function(e){var a=p.highCut;a.cancelScheduledValues(e),a.exponentialRampToValueAtTime(t.from([5e3,8e3,15e3,22e3]),e+n*t.inRange(1,5))},function(e){var a=p.lowCut;a.cancelScheduledValues(e),a.exponentialRampToValueAtTime(t.from([50,1e3,5e3,8e3,15e3]),e+n*t.inRange(1,5))},function(e){s.type=t.from(["notch","peaking","lowpass","bandpass","lowshelf"]);var a=s.frequency;a.cancelScheduledValues(e),a.exponentialRampToValueAtTime(t.from([100,3e3,7e3,15e3]),e+n*t.inRange(1,5))},function(e){var a=T.playbackRate;a.cancelScheduledValues(e),a.exponentialRampToValueAtTime(t.from([.1,.2,.8,1.5,3]),e+n*t.inRange(1,5))},function(e){a(d,{delayTimeLeft:t.from([300,500,2200,3500]),delayTimeRight:t.from([300,500,2200,3500])})}],o=0;u=i.schedule(function(e,a){0===o?(t.from(r)(a),o=3*t.from([1,2,3])):o--})})};
},{"hot-pockets":24,"./setParams":6,"./connectAll":7,"./rand":8}],16:[function(require,module,exports) {
function e(e){var t=e.createAnalyser();return t.fftSize=2048,t.smoothingTimeConstant=0,t}function t(e,t){var n=new Uint8Array(e.frequencyBinCount),r=t.getContext("2d");return function(){var a=t.width,l=t.height;e.getByteFrequencyData(n);var i=r.getImageData(1,0,a-1,l);r.putImageData(i,0,0);for(var o=l/n.length,u=0,c=l-1;u<n.length;u++,c-=o){var f=n[u];r.fillStyle="hsl("+(f+150)+", 100%, "+f/255*100+"%)",0===f&&(r.fillStyle="hsl(150, 100%, 80%)"),r.fillRect(a-1,c,1,-o)}}}module.exports={createNode:e,createRenderFunc:t};
},{}],17:[function(require,module,exports) {
function e(e){var t=e.createAnalyser();return t.fftSize=128,t}function t(e,t){var r=e.frequencyBinCount,n=new Uint8Array(r),a=t.getContext("2d");return function(){var i=t.width,o=t.height;e.getByteFrequencyData(n),a.fillStyle="hsla(180, 30%, 80%, 0.4)",a.fillRect(0,0,i,o),a.lineWidth=2,a.strokeStyle="hsla(250, 80%, 30%, 1.0)",a.beginPath();for(var l=1*o/r,c=o-l,u=0;u<r;u++){var f=n[u]/255,h=Math.max(2,i*f);a.moveTo(h,c),a.lineTo(h,c+l),c-=l}a.stroke()}}module.exports={createNode:e,createRenderFunc:t};
},{}],18:[function(require,module,exports) {
var e=1234;function t(t,r,a){for(var l,n=0,i=-1;n<r&&t[n]>a/2;)n++;if(n>=r)return 0;for(;n<r&&(l=t[n])<e;)l>=a/2?-1==i&&(i=n):i=-1,n++;return-1==i&&(i=n),n==r?0:0==i?0:i}function r(e){var t=e.createAnalyser();return t.fftSize=2048,t}function a(e,t){var r=new Uint8Array(t.width),a=t.getContext("2d");return function(){var l=t.width,n=t.height;e.getByteTimeDomainData(r);var i=a.getImageData(1,0,l-1,n);a.putImageData(i,0,0),a.lineWidth=1,a.strokeStyle="rgba(255, 255, 255, 0.1)",a.beginPath(),a.moveTo(0,n/2),a.lineTo(l,n/2),a.stroke();for(var o=r.length,f=0,c=0,h=0;h<o;h++){f+=r[h];var u=Math.abs(128-r[h]);u>c&&(c=u)}var v=n/2,g=(128-f/o)/128*v,s=c/128*v;a.fillStyle="hsl(260, 80%, 20%)",a.fillRect(l-1,0,1,n),a.fillStyle="hsla(90, 100%, 80%, .3)",a.fillRect(l-2,v-s,1,2*s),a.fillStyle="hsl(150, 100%, 80%)",a.fillRect(l-2,v-g,1,2*g)}}module.exports={createNode:r,createRenderFunc:a};
},{}],19:[function(require,module,exports) {
var e=1234;function t(t,r,n){for(var i,a=0,o=-1;a<r&&t[a]>n/2;)a++;if(a>=r)return 0;for(;a<r&&(i=t[a])<e;)i>=n/2?-1==o&&(o=a):o=-1,a++;return-1==o&&(o=a),a==r?0:0==o?0:o}function r(e){var t=e.createAnalyser();return t.fftSize=1024,t}function n(e,r){var n=new Uint8Array(r.width),i=r.getContext("2d");return function(){var a=r.width,o=r.height;e.getByteTimeDomainData(n),i.fillStyle="hsla(250, 80%, 30%, 0.3)",i.fillRect(0,0,a,o),i.lineWidth=1,i.strokeStyle="rgba(255, 255, 255, 0.7)",i.beginPath(),i.moveTo(0,o/2),i.lineTo(a,o/2),i.stroke(),i.lineWidth=2,i.beginPath();var f=a/(e.fftSize/2),l=t(n,a,o);0==l&&(l=1);for(var u=l,c=0;c<a-l;u++,c++)i.lineTo(c,o-f*n[u]);i.stroke()}}module.exports={createNode:r,createRenderFunc:n};
},{}],10:[function(require,module,exports) {
var e=require("hot-pockets"),o=require("./sonogram"),a=require("./scope"),n=require("./wave"),c=require("./osc-scope");function r(e){var r=o.createNode(e),t=document.createElement("canvas");t.style="width: 50vw; height: 50vh; background-color: hsl(150, 100%, 80%);",document.body.appendChild(t);var d=a.createNode(e),s=document.createElement("canvas");s.style="width: 50vw; height: 50vh;",document.body.appendChild(s);var v=n.createNode(e),u=document.createElement("canvas");u.style="width: 50vw; height: 50vh; background-color: hsl(260, 80%, 20%);",document.body.appendChild(u);var i=c.createNode(e),h=document.createElement("canvas");return h.style="width: 50vw; height: 50vh;",document.body.appendChild(h),{sonogramNode:r,sonogramCanvas:t,scopeNode:d,scopeCanvas:s,waveNode:v,waveCanvas:u,oscNode:i,oscCanvas:h}}r.connect=function(e,o){[e.sonogramNode,e.scopeNode,e.waveNode,e.oscNode].forEach(function(e){return o.connect(e)})},r.startRenderLoop=function(r){var t=r.sonogramNode,d=r.sonogramCanvas,s=r.scopeNode,v=r.scopeCanvas,u=r.waveNode,i=r.waveCanvas,h=r.oscNode,m=r.oscCanvas,l=void 0;e(function(){l&&cancelAnimationFrame(l);var e=o.createRenderFunc(t,d),r=a.createRenderFunc(s,v),p=n.createRenderFunc(u,i),N=c.createRenderFunc(h,m);!function o(){e(),r(),p(),N(),l=requestAnimationFrame(o)}()})},module.exports=r;
},{"hot-pockets":24,"./sonogram":16,"./scope":17,"./wave":18,"./osc-scope":19}],4:[function(require,module,exports) {
var e=require("hot-pockets"),n=require("./setParams"),t=require("./connectAll"),r=require("beat-emitter"),a=require("tunajs"),o=require("./rand"),c=require("./noise"),i=new AudioContext,s=new a(i),u=r(i);u.setBpm(100),u.start();var d=n(i.createDynamicsCompressor(),{threshold:0,knee:0,ratio:10,attack:.005,release:.05});d.connect(i.destination);var l=new s.Panner({pan:-.4}),v=new s.Panner({pan:.4});l.connect(d),v.connect(d);var m=require("./viz"),p=m(i);m.connect(p,d),m.startRenderLoop(p);var q=f(i,d,["noise","noise2"]);function f(e,n,t){var r={};return t.forEach(function(t){r[t]=e.createGain(),r[t].connect(n)}),r}function h(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object.keys(n).forEach(function(r){var a=i.currentTime,o=e[r].gain,c=n[r];o.cancelScheduledValues(a),o.exponentialRampToValueAtTime(c||1e-6,a+t)})}q.noise.disconnect(),q.noise.connect(l),q.noise2.disconnect(),q.noise2.connect(v),c({ac:i,dest:q.noise,beats:u,tuna:s}),c({ac:i,dest:q.noise2,beats:u,tuna:s}),e(function(){h(q,{noise:4,noise2:4})});
},{"hot-pockets":24,"./setParams":6,"./connectAll":7,"beat-emitter":25,"tunajs":26,"./rand":8,"./noise":9,"./viz":10}]},{},[4])
